# Классы-представления
---

|Класс-представление|Миксин|Родители|
|---|---|---|
|[`View()`](#класс%20`View()`)|||
|[`RedirectView()`](#класс%20`RedirectView()`)||[`View()`](#класс%20`View()`)|
||[`ContextMixin()`](#Примесь%20`ContextMixin()`)||
||[`TemplateResponseMixin()`](#Примесь%20`TemplateResponseMixin()`)||
|[`TemplateView()`](#класс%20`TemplateView()`)||[`TemplateResponseMixin()`](#Примесь%20`TemplateResponseMixin()`), [`ContextMixin()`](#Примесь%20`ContextMixin()`), [`View()`](#класс%20`View()`)|
||[`SingleObjectMixin()`](#примесь%20`SingleObjectMixin()`)|[`ContextMixin()`](#Примесь%20`ContextMixin()`)|
||[`SingleObjectTemplateResponseMixin()`](#примесь%20`SingleObjectTemplateResponseMixin()`)|[`TemplateResponseMixin()`](#Примесь%20`TemplateResponseMixin()`)|
|BaseDetailView||[`SingleObjectMixin()`](#примесь%20`SingleObjectMixin()`), [`View()`](#класс%20`View()`)|
|[`DetailView()`](#класс%20`DetailView()`)||[`SingleObjectTemplateResponseMixin()`](#примесь%20`SingleObjectTemplateResponseMixin()`), BaseDetailView|
||MultipleObjectMixin|[`ContextMixin()`](#Примесь%20`ContextMixin()`)|
||MultipleObjectTemplateResponseMixin|[`TemplateResponseMixin()`](#Примесь%20`TemplateResponseMixin()`)|
|BaseListView||MultipleObjectMixin, [`View()`](#класс%20`View()`)|
|ListView||MultipleObjectTemplateResponseMixin, BaseListView|
||FormMixin|[`ContextMixin()`](#Примесь%20`ContextMixin()`)|
|ProcessFormView||[`View()`](#класс%20`View()`)|
|BaseFormView||FormMixin, ProcessFormView|
|FormView||FormMixin, BaseFormView|
||ModelFormMixin|[`SingleObjectMixin()`](#примесь%20`SingleObjectMixin()`), FormMixin|
|BaseCreateView||ModelFormMixin, ProcessFormView|
|CreateView||[`SingleObjectTemplateResponseMixin()`](#примесь%20`SingleObjectTemplateResponseMixin()`), BaseCreateView|
|BaseUpdateView||ModelFormMixin, ProcessFormView|
|UpdateView||[`SingleObjectTemplateResponseMixin()`](#примесь%20`SingleObjectTemplateResponseMixin()`), BaseUpdateView|
||DeletionMixin||
|BaseDeleteView||DeletionMixin, FormMixin, BaseDetailView|
|DeleteView||[`SingleObjectTemplateResponseMixin()`](#примесь%20`SingleObjectTemplateResponseMixin()`), BaseDeleteView|
||DateMixin||
|BaseDateListView||MultipleObjectMixin, DateMixin, [`View()`](#класс%20`View()`)|
|BaseArchiveIndexView||BaseDateListView|
|ArchiveIndexView||MultipleObjectTemplateResponseMixin, BaseArchiveIndexView|
||YearMixin||
|BaseYearArchiveView||YearMixin, BaseDateListView|
|YearArchiveView||MultipleObjectTemplateResponseMixin, BaseYearArchiveView|
||MonthMixin||
|BaseMonthArchiveView||YearMixin, MonthMixin, BaseDateListView|
|MonthArchiveView||MultipleObjectTemplateResponseMixin, BaseMonthArchiveView|
||DayMixin||
|BaseDayArchiveView||YearMixin, MonthMixin, DayMixin, BaseDateListView|
|DayArchiveView||MultipleObjectTemplateResponseMixin, BaseDayArchiveView|
|BaseTodayArchiveView||BaseDayArchiveView|
|TodayArchiveView||MultipleObjectTemplateResponseMixin, BaseTodayArchiveView|
||WeekMixin||
|BaseWeekArchiveView||YearMixin, WeekMixin, BaseDateListView|
|WeekArchiveView||MultipleObjectTemplateResponseMixin, BaseWeekArchiveView|
|BaseDateDetailView||YearMixin, MonthMixin, DayMixin, DateMixin, BaseDetailView|
|DateDetailView||[`SingleObjectTemplateResponseMixin()`](#примесь%20`SingleObjectTemplateResponseMixin()`), BaseDateDetailView|

## класс `View()`
---
>django.views.generic.base

Настраиваемые атрибуты:
|атрибут|описание|
|---|---|
|`http_method_names`|список имен допустимых HTTP методов. По умолчанию хранит список ['get', 'post', 'put', 'patch', 'delete', 'head', 'options', 'trace']|

Доступные атрибуты:
|атрибут|описание|
|---|---|
|`request`|устанавливается методом `self.setup()`|
|`args`|устанавливается методом `self.setup()`|
|`kwargs`|устанавливается методом `self.setup()`|

Методы:
|метод|описание|
|---|---|
|`__init__(**kwargs)`|Устранавливает значение любых пользовательских атрибутов|
|`as_view(**initkwargs)`|Возвращает ссылку на функцию, которая, при обращении в ней, вызывает метод `self.setup()`, затем `self.dispatch()` и возвращает результат его исполнения (HTTP-Ответ)<br>Этод метод нужно вставить в маршрутизатор<br>- `initkwargs`: именованные аргументы для переопределения атрибутов класса-представления. Если атрибут у класса отсутствует, вызывается исключение `TypeError`|
|`setup(request, *args, **kwargs)`|Запускается при получении управления от маршрутизатора. Устанавливает значение атрибутов объекта класса: `self.head`, `self.request`, `self.args`, `self.kwargs`<br>>`*args` является устаревшим и используется только в старых версиях Django|
|`dispatch(request, *args, **kwargs)`|Запускается при получении управления от маршрутизатора после метода `self.setup()`. Проверяет тип HTTP-метода в `request`, сравнивает его со списком допустимых методов в `http_method_names` и возвращает результат исполнения метода класса с именем, совпадающим с именем HTTP-метода (Например `self.get()`). Иначе вызывает метод `self.http_method_not_allowed()`|
|`http_method_not_allowed(request, *args, **kwargs)`|Вызывается из `dispatch()`. Возвращает ответ типа `HttpResponseNotAllowed()`|
|`options(request, *args, **kwargs)`|Обрабатывает запрос, выполненный HTTP-методом `OPTIONS`|
|`get()`, `post()` ... и другие методы|Не определены в классе `View` и требуют ручного добавления. Без добавления обработчиков этих методов класс `View` бесполезный.<br>Формат объевления: `methodname(self, request, *args, **kwargs)`|

## класс `RedirectView()`
---
>django.views.generic.base

Настраиваемые атрибуты:
|атрибут|описание|
|---|---|
|`http_method_names`|[класс `View()`](#класс%20`View()`)|
|`permanent`|Если `True`, метод обработки HTTP-запроса вернет постоянный редирект `HttpResponsePermanentRedirect()`, а иначе временный редирект `HttpResponseRedirect()`. По умолчанию `False`|
|`url`|Строка с URL-адресом, на который будет осуществляться редирект. Может содержать текстовые шаблоны `'%(key_name)s'` куда будут подставляться `**kwargs` из `self.get_redirect_url()`. По умолчанию `None`<br>Если `url` не задан, будет проверяться значение `self.pattern_name`|
|`pattern_name`|Строка с именем маршрута для редиректа. Используется, если не задан `self.url`. По умолчанию `None`|
|`query_string`|Если `True`, то из запроса `request` в URL добавятся ключи поиска (при наличии) (Например '?page=10'). По умолчанию `False`|

Доступные атрибуты:
|атрибут|описание|
|---|---|
|`request`|устанавливается методом `self.setup()`|
|`args`|устанавливается методом `self.setup()`|
|`kwargs`|устанавливается методом `self.setup()`|

Методы:
|метод|описание|
|---|---|
|`__init__(**kwargs)`|[класс `View()`](#класс%20`View()`)|
|`as_view(**initkwargs)`|[класс `View()`](#класс%20`View()`)|
|`setup(request, *args, **kwargs)`|[класс `View()`](#класс%20`View()`)|
|`dispatch(request, *args, **kwargs)`|[класс `View()`](#класс%20`View()`)|
|`http_method_not_allowed(request, *args, **kwargs)`|[класс `View()`](#класс%20`View()`)|
|`get_redirect_url(*args, **kwargs)`|Вызывается из обработчика метода HTTP-запроса (Например `self.get()`). Возвращает путь `self.url` с заполнеными шаблонами или `reverse()` на `pattern_name`, в конце которых добавлены ключи поичка если `query_string`|
|`get(request, *args, **kwargs)`, `post()`, `head()`, `options()`, `delete()`, `put()`, `patch()`|Обработчик метода HTTP-запрса. Вызывается из `self.dispatch()`, возвращает HTTP-ответ редиректа на адрес `self.url` или на маршрутизатор `self.pattern_name` в формате класса `HttpResponseRedirect()` или `HttpResponsePermanentRedirect()` (зависит от `self.permanent`)|


## примесь `ContextMixin()`
---
>django.views.generic.base

Атрибуты:
|атрибут|описание|
|---|---|
|`extra_context`|Словарь, значения которого будут добавлены в контекст. По умолчанию `None`|

Методы:
|метод|описание|
|---|---|
|`get_context_data(request, **kwargs)`|Вызывается из методов `self.get()`, `self.post()` и прочих. Формирует справочник `context`, который затем будет передаваться в шаблон.<br>По умолчанию контекст содержит одно значение `view`, содержащее instance класса-контроллера. Так же в контекст добавляются значения `**kwargs` (из маршрутизатора) и `self.extra_context`|
```python
context = {
	'view': self,
	**self.extra_context,
	**kwargs # kwargs, переданные в get_context_data()
}
```

## примесь `TemplateResponseMixin()`
---
>django.views.generic.base

Атрибуты:
|атрибут|описание|
|---|---|
|`template_name`|Строка с именем шаблона. По умолчанию `None`. Обязательный к указанию (или переопределить `get_template_names()`|
|`template_engine`|"Движок", который должен обрабатывать шаблон. По умолчанию `None`|
|`response_class`|Ссылка на класс, с помощью которого будет осуществляться рендер шаблона и подготовка HTTP-ответа. По умолчанию `TemplateResponse`|
|`content_type`|`MIME`-тип ответа и его кодировка. По умолчанию `None` (используется кодировка по умолчанию)|

Методы:
|метод|описание|
|---|---|
|`get_template_names()`|Возвращает список имен шаблонов для передачи в `self.render_to_response()`. По умолчанию возвращает список из одного элемента, содержащего значение `self.template_name`|
|`render_to_response(context, **response_kwargs)`|Вызывается из методов `self.get()`, `self.post()` и т.д. Возвращает подготовленный HTTP-ответ для передачи в браузер. HTTP-ответ готовится с помощью класса, указанного в атрибуте `self.response_class`|

## класс `TemplateView()`
---
>django.views.generic.base

Настраиваемые атрибуты:
|атрибут|описание|
|---|---|
|`http_method_names`|[класс `View()`](#класс%20`View()`)|
|`extra_context`|[примесь `ContextMixin()`](#Примесь%20`ContextMixin()`)|
|`template_name`|[примесь `TemplateResponseMixin()`](#примесь%20`TemplateResponseMixin()`) Обязательный (или переопределить `get_template_names()`|
|`template_engine`|[примесь `TemplateResponseMixin()`](#примесь%20`TemplateResponseMixin()`)|
|`response_class`|[примесь `TemplateResponseMixin()`](#примесь%20`TemplateResponseMixin()`)|
|`content_type`|[примесь `TemplateResponseMixin()`](#примесь%20`TemplateResponseMixin()`)|

Доступные атрибуты:
|атрибут|описание|
|---|---|
|`request`|устанавливается методом `self.setup()`|
|`args`|устанавливается методом `self.setup()`|
|`kwargs`|устанавливается методом `self.setup()`|

Методы:
|метод|описание|
|---|---|
|`__init__(**kwargs)`|[класс `View()`](#класс%20`View()`)|
|`as_view(**initkwargs)`|[класс `View()`](#класс%20`View()`)|
|`setup(request, *args, **kwargs)`|[класс `View()`](#класс%20`View()`)|
|`dispatch(request, *args, **kwargs)`|[класс `View()`](#класс%20`View()`)|
|`http_method_not_allowed(request, *args, **kwargs)`|[класс `View()`](#класс%20`View()`)|
|`options(request, *args, **kwargs)`|[класс `View()`](#класс%20`View()`)|
|`get(request, *args, **kwargs)`|Вызывается из `self.dispath()`. Обработчик метода HTTP-запроса `GET`.<br>Получает контекст, собранный с помощью `self.get_context_data()` и возвращает в `self.dispatch()` HTTP-ответ, подготовленный с помощью `self.render_to_response()`|
|`get_context_data(request, **kwargs)`|[примесь `ContextMixin()`](#примесь%20`ContextMixin()`)|
|`get_template_names()`|[примесь `TemplateResponseMixin()`](#примесь%20`TemplateResponseMixin()`)|
|`render_to_response(context, **response_kwargs)`|[примесь `TemplateResponseMixin()`](#примесь%20`TemplateResponseMixin()`)|
```python
context = {
	'view': self,
	**self.extra_context,
	**kwargs # kwargs, переданные в get_context_data()
}
```

## примесь `SingleObjectMixin()`
---
>django.views.generic.detail

Атрибуты:
|атрибут|описание|
|---|---|
|`extra_context`|[примесь `ContextMixin()`](#примесь%20`ContextMixin()`)|
|`queryset`|Имеет приоритет перед `self.model`. Может быть указан объект типа `Manager()` или `QuerySet()` из которого `self.get_queryset()` будет возвращать все записи методом `self.queryset.all()`. По умолчанию `None`<br>Игнорируется если в `self.get_object()` передан queryset|
|`model`|Указывается ссылка на класс модели, из которой `self.get_queryset()` будет возращать все записи методом `self.model._default_manager.all()`, если не задан атрибут `self.queryset`. По умолчанию `None`<br>Игнорируется если в `self.get_object()` передан queryset|
|`slug_field`|Значение (строка), которое возвращается методом `self.get_slug_field()`. По умолчанию "slug" - имя поля модели, в котором хранится слаг|
|`context_object_name`|Значение (строка), которое возвращается методом `self.get_context_object_name()`. По умолчанию `None`|
|`slug_url_kwarg`|Имя ключа атрибута `**kwargs`, полученного из маршрутизатора, в котором будет искаться значение слага. По умочанию "slug"|
|`pk_url_kwarg`|Имя ключа атрибута `**kwargs`, полученного из маршрутизатора, в котором будет искаться значение первичного ключа. По умолчанию "pk"|
|`query_pk_and_slug`|Если `True`, то при одновременном указании в `**kwargs` `pk` и `slug`, предпочтение при поиске объекта будет отдано `slug`. По умолчанию `False`|

Методы:
|метод|описание|
|---|---|
|`get_object(queryset=None)`|Вызывается из обработчика метода HTTP-запроса (Например `self.get()`). Возвращает объект модели с первичным ключем с именем `self.pk_url_kwarg` или `self.slug_url_kwarg`, значение которого ищется в `self.kwargs` (см. `self.setup()`)<br>Поиск объекта осуществляется в объекте, полученном при вызове методе через параметр `queryset`, а если он не передан, тогда поиск объекта осуществляется в объекте `QuerySet()`, возвращенном методом `get_queryset()`|
|`get_queryset()`|Вызывается из `self.get_object()`, если в него не был передан queryset. Возвращает набор объектов из объекта `self.queryset.all()`, а если он не задан, то из `self.model._defautl_manager.all()`|
|`get_slug_field()`|Вызывается из `self.get_object()`. Возвращает значение атрибута `self.slug_field` в котором хранится имя поля модели, в котором хранится слаг|
|`get_context_object_name(obj)`|Вызывается из `self.get_context_data()`. Задает в контексте альтернативное имя ключу `object`, в котором хранится экземпляр объекта. Альтернативным именем будет являться занчение, указанное в параметре `self.context_object_name`, а если оно не задано, тогда имя модели `obj._meta.model_name`|
|`get_context_data(request, **kwargs)`|Вызывается из методов `self.get()`, `self.post()` и прочих. Формирует справочник `context`, который затем будет передаваться в шаблон.<br>По умолчанию контекст содержит одно значение `view`, содержащее instance класса-контроллера. Так же в контекст добавляются значения `**kwargs` (из маршрутизатора) и `self.extra_context`<br>Если в экемпляре класса есть атрибут `self.object`, содержащий экземпляр объекта модели, то в контекст помещается значение `object`, а так же альтернативный ключ, возвращаемый `self.get_context_object_name()`|
```python
context = {
	'view': self,
	'object': # Объект модели
	<context_object_name>: # Объект модели, имя атрибута из get_context_object_name()
	**self.extra_context,
	**kwargs # kwargs, переданные в get_context_data()
}
```

## примесь `SingleObjectTemplateResponseMixin()`
---
>django.views.generic.detail

Атрибуты:
|атрибут|описание|
|---|---|
|`template_name`|[примесь `TemplateResponseMixin()`](#примесь%20`TemplateResponseMixin()`) Если не указан, применяются `template_name_field` и `template_name_suffix`|
|`template_engine`|[примесь `TemplateResponseMixin()`](#примесь%20`TemplateResponseMixin()`)|
|`response_class`|[примесь `TemplateResponseMixin()`](#примесь%20`TemplateResponseMixin()`)|
|`content_type`|[примесь `TemplateResponseMixin()`](#примесь%20`TemplateResponseMixin()`)|
|`template_name_field`|Имя поля модели, в котором хранится путь к шаблону. Проверяется если не задан атрибут `self.template_name`. По умолчанию `None`|
|`template_name_suffix`|Конечная часть имени шаблона. Используется если не задан атрибут `self.template_name`. По умолчанию "_detail"|

Методы:
|метод|описание|
|---|---|
|`get_template_names()`|Вызывается из `self.render_to_response()`. Возвращает список имен шаблонов. Если указан `self.template_name`, возвращает список из одного элемента, содержащего значение `self.template_name`<br>Иначе возврашает список из имени шаблона, указанного в поле модели с именем `self.template_name_field` (при наличии), а так же `<имя приложения>/<имя модели>_<суффикс>.html`, где суффикс, это значение `self.template_name_suffix`|
|`render_to_response(context, **response_kwargs)`|[примесь `TemplateResponseMixin()`](#примесь%20`TemplateResponseMixin()`)|

## класс `DetailView()`
---
>django.views.generic.detail

Настраиваемые атрибуты:
|атрибут|описание|
|---|---|
|`http_method_names`|[класс `View()`](#класс%20`View()`)|
|`extra_context`|[примесь `ContextMixin()`](#примесь%20`ContextMixin()`)|
|`queryset`|[примесь `SingleObjectMixin()`](#примесь%20`SingleObjectMixin()`)|
|`model`|[примесь `SingleObjectMixin()`](#примесь%20`SingleObjectMixin()`)|
|`slug_field`|[примесь `SingleObjectMixin()`](#примесь%20`SingleObjectMixin()`)|
|`context_object_name`|[примесь `SingleObjectMixin()`](#примесь%20`SingleObjectMixin()`)|
|`slug_url_kwarg`|[примесь `SingleObjectMixin()`](#примесь%20`SingleObjectMixin()`)|
|`pk_url_kwarg`|[примесь `SingleObjectMixin()`](#примесь%20`SingleObjectMixin()`)|
|`query_pk_and_slug`|[примесь `SingleObjectMixin()`](#примесь%20`SingleObjectMixin()`)|
|`template_name`|[примесь `TemplateResponseMixin()`](#примесь%20`TemplateResponseMixin()`) Если не указан, применяются `template_name_field` и `template_name_suffix`|
|`template_engine`|[примесь `TemplateResponseMixin()`](#примесь%20`TemplateResponseMixin()`)|
|`response_class`|[примесь `TemplateResponseMixin()`](#примесь%20`TemplateResponseMixin()`)|
|`content_type`|[примесь `TemplateResponseMixin()`](#примесь%20`TemplateResponseMixin()`)|
|`template_name_field`|[примесь `SingleObjectTemplateResponseMixin()`](#примесь%20`SingleObjectTemplateResponseMixin()`)|
|`template_name_suffix`|[примесь `SingleObjectTemplateResponseMixin()`](#примесь%20`SingleObjectTemplateResponseMixin()`)|

Доступные атрибуты:
|атрибут|описание|
|---|---|
|`request`|устанавливается методом `self.setup()`|
|`args`|устанавливается методом `self.setup()`|
|`kwargs`|устанавливается методом `self.setup()`|
|`object`|устанавливается методом `self.get()`|

Методы:
|метод|описание|
|---|---|
|`__init__(**kwargs)`|[класс `View()`](#класс%20`View()`)|
|`as_view(**initkwargs)`|[класс `View()`](#класс%20`View()`)|
|`setup(request, *args, **kwargs)`|[класс `View()`](#класс%20`View()`)|
|`dispatch(request, *args, **kwargs)`|[класс `View()`](#класс%20`View()`)|
|`http_method_not_allowed(request, *args, **kwargs)`|[класс `View()`](#класс%20`View()`)|
|`options(request, *args, **kwargs)`|[класс `View()`](#класс%20`View()`)|
|`get(request, *args, **kwargs)`|Определен в `BaseDetailView()`. Возвращает HTTP-ответ подготовленный методом `self.render_to_response()` с контекстом из `self.get_context_data()` для передачи браузеру в метод `self.dispatch()`. Заполняет атрибут класса `self.object`, который берется из `self.get_object()`|
|`get_object(queryset=None)`|[примесь `SingleObjectMixin()`](#примесь%20`SingleObjectMixin()`)|
|`get_queryset()`|[примесь `SingleObjectMixin()`](#примесь%20`SingleObjectMixin()`)|
|`get_slug_field()`|[примесь `SingleObjectMixin()`](#примесь%20`SingleObjectMixin()`)|
|`get_context_object_name(obj)`|[примесь `SingleObjectMixin()`](#примесь%20`SingleObjectMixin()`)|
|`get_context_data(request, **kwargs)`|[примесь `SingleObjectMixin()`](#примесь%20`SingleObjectMixin()`)|
|`get_template_names()`|[примесь `SingleObjectTemplateResponseMixin()`](#примесь%20`SingleObjectTemplateResponseMixin()`)|
|`render_to_response(context, **response_kwargs)`|[примесь `TemplateResponseMixin()`](#примесь%20`TemplateResponseMixin()`)|
```python
context = {
	'view': self,
	'object': # Объект модели self.object
	<context_object_name>: # Объект модели, имя атрибута из get_context_object_name()
	**self.extra_context,
	**kwargs # kwargs, переданные в get_context_data()
}
```



